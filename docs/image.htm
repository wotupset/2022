<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8" />
<title></title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, max-age=0, must-revalidate">
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="expires" content="0" />

<script src="https://cdn.jsdelivr.net/gh/jquery/jquery@latest/dist/jquery.min.js"></script>

<style>
body{}
</style>

<script>
	var query = location.search.replace("?", "");
	var a = new Array();
	a = query.split("!");
	var QUERY = new Object();
	for (i=0; i<a.length; i++) {
		var b = new Array();
		b = a[i].split('~');
		QUERY[b[0]] = unescape(b[1]);
	}

//var door= QUERY['door'];
var qy=[0,1,''];
//console.log( qy );

if( QUERY['m'] ){
	var str = QUERY['m'];
	var re = /[0-9]{2,2}/i;
	var found = str.match(re);
	//console.log( found );
	qy[0]=found;
}else{
	console.log( 'nn' );
}
if( QUERY['d'] ){
	var str = QUERY['d'];
	var re = /[0-9]{2,2}/i;
	var found = str.match(re);
	//console.log( found );
	qy[1]=found;
}else{
	console.log( 'nn' );
}


//console.log( qy );

if( qy[0] && qy[1] ){
	qy[0]= QUERY['m'];
	qy[1]= QUERY['d'];

	qy[2]='https://raw.githubusercontent.com/wotupset/2022/new220101/';
	qy[2]=qy[2] +qy[0]+'/'+qy[1]+'/';

}else{
	console.log( 'nn' );
}


console.log( qy );

//https://raw.githubusercontent.com/wotupset/2021/211003new/11/04/list2/-.txt
//image.htm?m~11!d~04


</script>


<script>
document.addEventListener("DOMContentLoaded",function(e){
	console.log( "DOMContentLoaded" );
	var bb=document.querySelector("body");
	//console.log(bb);
});

$(function(){});
$(()=>{
	console.log('jq');
  //
  $.gg=[];
  //
  //poi();
  //poi2();
  //poi191022();
  poi211127();
});
function poi211127(){
var jqxhr = $.ajax({
  url: qy[2]+"./list2/-.txt",
});
jqxhr.done(function(x1,x2,x3){//data, textStatus, jqXHR
  console.log( 'jqxhr.done' ); 
  poi191022b( x1 );
});
jqxhr.fail(function(x1,x2,x3){// jqXHR, textStatus, errorThrown
  console.log( 'jqxhr.fail' ); 
  $('#ddd').append('獲取失敗');
});
jqxhr.always(function(x1,x2,x3){ //data|jqXHR, textStatus, jqXHR|errorThrown
  console.log( 'jqxhr.always' );
});

}//poi211127()

//舊版
function poi191022(){
	//console.log( 'poi191022()' );
	var xhr = new XMLHttpRequest();
	xhr.open("GET",qy[2]+"./list2/-.txt", true);
	xhr.onreadystatechange = function(){
		console.log( xhr.readyState,xhr.status );
		if(xhr.readyState==4){
			if(xhr.status==200){
				allText = xhr.responseText;
				//console.log( allText );
				poi191022b( allText );
			}
			if(xhr.status==404){
				
			}
		}

	};
	xhr.send();
}//poi191022()

function poi191022b( str ){
	//console.log( 'poi191022b()' );
	console.log( str );
	//var str='';
	str = str.replace(/\r\n/g, "\n");
	str = str.split("\n"); //以行分割
	var FFF='';
	str=str.filter(function(item,index){
		//console.log( item,index );
		item=item.toLowerCase();//加上後 副檔名就不分大小寫
		var aa=item.endsWith(".jpg");
		if(aa){return true;}
		var aa=item.endsWith(".png");
		if(aa){return true;}
		var aa=item.endsWith(".gif");
		if(aa){return true;}
		return false;
	});
	console.log( str );
	var FFF='';
	str.forEach(function(element,index) {
		poi(element,index);
	});
}//poi191022b( str )






function poi(in1,in2){
//https://raw.githubusercontent.com/wotupset/2021/211003new/11/04/list2/-.txt
//image.htm?m~11!d~04
var FFF=qy[2]+'./list2/'+in1;
var str=`
<img width="300" height="300" style="background-color:gray;" src="${FFF}" alt="alt${in2}" title="title${in2}" />
`;
	//console.log(str);
	$('#ddd').append(str);
}

</script>

</head>
<body>
<div id="ddd"></div>
</body>
</html>
